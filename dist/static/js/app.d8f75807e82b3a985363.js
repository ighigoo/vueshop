webpackJsonp([1],{"+GFq":function(t,a){},ASbF:function(t,a){},DcH3:function(t,a){},EVWC:function(t,a){},HDE4:function(t,a){},HN1p:function(t,a){},IJOW:function(t,a){},MbL5:function(t,a){},NHnr:function(t,a,e){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var s=e("7+uW"),i=e("mtWM"),o=e.n(i),r=e("Rf8U"),n=e.n(r),c=(e("K3J8"),e("ZZvs")),l=e.n(c),d=(e("SYh3"),e("e6fC")),u=e.n(d),p=e("sUu7"),v=e("1SbN"),m=e.n(v),h=e("TXmL"),_={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},staticRenderFns:[]};var g=e("VU/8")({name:"App",created:function(){}},_,!1,function(t){e("R8Ho")},null,null).exports,f=e("/ocq"),b={name:"Login",data:function(){return{user:{username:"",password:""}}},methods:{signIn:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/admin/signin",t.user).then(function(a){a.data.success?(t.$bus.$emit("checkLoginBus"),t.$router.push("/admin")):t.$bus.$emit("message:push",a.data.message,"danger")})}},created:function(){vm.$bus.$emit("checkLoginBus")}},C={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("form",{staticClass:"form-signin",on:{submit:function(a){return a.preventDefault(),t.signIn(a)},keyup:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.signIn(a)}}},[e("h1",{staticClass:"h3 mb-3 font-weight-normal"},[t._v("請先登入")]),t._v(" "),e("label",{staticClass:"sr-only",attrs:{for:"inputEmail"}},[t._v("Email address")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"form-control",attrs:{type:"email",id:"inputEmail",placeholder:"Email address",required:"",autofocus:""},domProps:{value:t.user.username},on:{input:function(a){a.target.composing||t.$set(t.user,"username",a.target.value)}}}),t._v(" "),e("label",{staticClass:"sr-only",attrs:{for:"inputPassword"}},[t._v("Password")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.user.password,expression:"user.password"}],staticClass:"form-control",attrs:{type:"password",id:"inputPassword",placeholder:"Password",required:""},domProps:{value:t.user.password},on:{input:function(a){a.target.composing||t.$set(t.user,"password",a.target.value)}}}),t._v(" "),e("button",{staticClass:"btn btn-lg btn-primary text-light btn-block mt-3",attrs:{type:"submit"}},[t._v("Sign in")]),t._v(" "),e("p",{staticClass:"mt-3 mb-3 text-muted"},[t._v("© 2019")])])])},staticRenderFns:[]};var y=e("VU/8")(b,C,!1,function(t){e("WRUv")},"data-v-6614158d",null).exports,x=e("7t+N"),w=e.n(x),k={data:function(){return{cart:{carts:[]},detailSetting:{ice:["正常冰","少冰","去冰"],sweet:["正常糖","少糖","無糖"],size:["M","L"]},loadingItem:"false",coupon_code:""}},methods:{getCart:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/cart").then(function(e){a.cart=e.data.data,t.$http.get("https://protected-river-71754.herokuapp.com/carts").then(function(e){var s=e.data;a.cart.carts.forEach(function(e,i){var o=s.find(function(t){return t.cart_id===e.id});o&&(t.$set(t.cart.carts[i],"detailId",o.id),t.$set(t.cart.carts[i],"detail",o.detail)),a.isLoading=!1})})})},deleteCart:function(t,a){var e=this,s=this,i="https://vue-course-api.hexschool.io/api/ighigoo/cart/"+t,o="https://protected-river-71754.herokuapp.com/carts/"+a+" ";s.loadingItem=t,this.$http.delete(i).then(function(t){e.$http.delete(o).then(function(t){s.getCart(),console.log(t.data)})})}},computed:{cartItemNum:function(){return this.cart.carts?this.cart.carts.length:0}},created:function(){var t=this;t.getCart(),t.$bus.$on("cartNav:reflash",function(){t.getCart()})}};w()(function(){w()(".dropdown-menu").on("click",function(t){t.stopPropagation()})});var $={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"dropdown"},[e("button",{staticClass:"btn btn-sm",attrs:{"data-toggle":"dropdown","data-flip":"false"}},[e("i",{staticClass:"fa fa-shopping-cart text-white fa-2x",attrs:{"aria-hidden":"true"}}),t._v(" "),e("span",{staticClass:"badge badge-pill badge-danger"},[t._v(t._s(t.cartItemNum))])]),t._v(" "),e("div",{staticClass:"dropdown-menu dropdown-menu-right p-3",attrs:{"data-offset":"600"}},[e("h6",[t._v("已選擇商品")]),t._v(" "),e("table",{staticClass:"table"},[t._m(0),t._v(" "),e("tbody",[0===t.cart.carts.length?e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("購物車尚無選購商品")])]):t._e(),t._v(" "),t._l(t.cart.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCart(a.id,a.detailId)}}},[a.id===t.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v("\n            "+t._s(a.product.title)+"\n            ("+t._s(t.detailSetting.size[a.detail.size])+")\n            "),e("span",{staticClass:"h6 text-danger font-detail"},[t._v("\n              "+t._s(t.detailSetting.ice[a.detail.ice])+" ,\n              "+t._s(t.detailSetting.sweet[a.detail.sweet])+"\n            ")]),t._v(" "),a.coupon?e("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})],2),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),t.cart.total?e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))]):e("td",{staticClass:"text-right"},[t._v("0")])]),t._v(" "),t.cart.total!==t.cart.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),t._v(" "),e("router-link",{staticClass:"btn btn-primary w-100 text-center text-light",attrs:{tag:"button",to:"/Shopping/Order"}},[t._v("結帳去")])],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th"),this._v(" "),a("th",[this._v("品名")]),this._v(" "),a("th",{staticClass:"text-nowrap"},[this._v("數量")]),this._v(" "),a("th",{staticClass:"text-nowrap"},[this._v("單價")])])}]};var P={name:"Navbar",components:{ShoppingCartNav:e("VU/8")(k,$,!1,function(t){e("T2pz")},"data-v-0f29fce9",null).exports},data:function(){return{isLogin:!1}},methods:{logOut:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/logout").then(function(a){a.data.success&&(t.checkLogin(),t.$router.push("/admin/login"))})},checkLogin:function(){var t=this;this.$http.post("https://vue-course-api.hexschool.io/api/user/check").then(function(a){t.isLogin=a.data.success})}},created:function(){var t=this;t.checkLogin(),t.$bus.$on("checkLoginBus",function(){t.checkLogin()})}},M={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{staticClass:"navbar navbar-dark fixed-top bg-primary-dark flex-md-nowrap p-0 shadow navbar-expand-sm d-flex"},[e("router-link",{staticClass:"navbar-brand bg-primary-dark h-100 px-4 py-4 mr-0",attrs:{to:"/"}},[e("i",{staticClass:"fas fa-glass-cheers mr-2"}),t._v("好喝飲料鋪\n    ")]),t._v(" "),e("ShoppingCartNav",{staticClass:"ml-auto order-sm-1"}),t._v(" "),t._m(0),t._v(" "),e("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarSupportedContent"}},[e("ul",{staticClass:"navbar-nav ml-auto p-3"},[e("li",{staticClass:"nav-item active"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/Shopping/Shopping_List"}},[t._v("產品列表")])],1),t._v(" "),e("li",{staticClass:"nav-item text-nowrap"},[t.isLogin?e("a",{staticClass:"nav-link",attrs:{href:"#"},on:{click:function(a){return a.preventDefault(),t.logOut(a)}}},[t._v("登出(後台)")]):e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/login"}},[t._v("登入(後台)")])],1)])])],1)])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"navbar-toggler order-sm-2",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}]};var N=e("VU/8")(P,M,!1,function(t){e("bwvt")},null,null).exports,L={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("nav",{staticClass:"col-md-2 d-none d-md-block bg-light sidebar"},[e("div",{staticClass:"sidebar-sticky"},[e("ul",{staticClass:"nav flex-column"},[t._m(0),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/products"}},[e("i",{staticClass:"fas fa-box-open mr-1"}),t._v("產品列表\n          ")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/coupons_list"}},[e("i",{staticClass:"fas fa-money-bill mr-1"}),t._v("折扣碼列表\n          ")])],1),t._v(" "),e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/admin/order_list"}},[e("i",{staticClass:"fas fa-file-invoice-dollar mr-2"}),t._v("訂單列表\n          ")])],1)]),t._v(" "),t._m(1),t._v(" "),e("ul",{staticClass:"nav flex-column mb-2"},[e("li",{staticClass:"nav-item"},[e("router-link",{staticClass:"nav-link",attrs:{to:"/customer_order"}},[e("i",{staticClass:"fas fa-clipboard-list"}),t._v("\n            模擬訂單\n          ")])],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("li",{staticClass:"nav-item"},[a("a",{staticClass:"nav-link active",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"home"}}),this._v("\n            管理員\n            "),a("span",{staticClass:"sr-only"},[this._v("(current)")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h6",{staticClass:"sidebar-heading d-flex justify-content-between align-items-center px-3 mt-4 mb-1 text-muted"},[a("span",[this._v("模擬功能")]),this._v(" "),a("a",{staticClass:"d-flex align-items-center text-muted",attrs:{href:"#"}},[a("span",{attrs:{"data-feather":"plus-circle"}})])])}]};var E=e("VU/8")({},L,!1,function(t){e("ASbF")},null,null).exports,O={name:"Alert",data:function(){return{messages:[]}},methods:{updateMessage:function(t,a){var e=Math.floor(new Date/1e3);this.messages.push({message:t,status:a,timestamp:e}),this.removeMessageWithTiming(e)},removeMessage:function(t){this.messages.splice(t,1)},removeMessageWithTiming:function(t){var a=this;setTimeout(function(){a.messages.forEach(function(e,s){e.timestamp===t&&a.messages.splice(s,1)})},3e3)}},created:function(){var t=this;t.$bus.$on("message:push",function(a){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warning";t.updateMessage(a,e)})}},S={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"message-alert"},t._l(t.messages,function(a,s){return e("div",{key:s,staticClass:"alert alert-dismissible",class:"alert-"+a.status},[t._v("\n    "+t._s(a.message)+"\n    "),e("button",{staticClass:"close",attrs:{type:"button","aria-label":"Close"},on:{click:function(a){return t.removeMessage(s)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])}),0)},staticRenderFns:[]};var q=e("VU/8")(O,S,!1,function(t){e("rj+Z")},null,null).exports,B={components:{Navbar:N,Sidebar:E,Alert:q}},D={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("Alert"),this._v(" "),a("Navbar"),this._v(" "),a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("Sidebar",{staticClass:"mt-5"}),this._v(" "),a("main",{staticClass:"col-md-9 ml-sm-auto col-lg-10 px-4 mt-5",attrs:{role:"main"}},[a("router-view")],1)],1)])],1)},staticRenderFns:[]};var T=e("VU/8")(B,D,!1,function(t){e("HN1p")},null,null).exports,R=e("woOf"),U=e.n(R),I={data:function(){return{products:[],tempProduct:{},pagination:{},isNew:!1,isLoading:!1,status:{fileUploading:!1}}},methods:{getProducts:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/admin/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(a).then(function(a){t.isLoading=!1,t.products=a.data.products,t.pagination=a.data.pagination})},openModal:function(t,a){t?(this.tempProduct={},this.isNew=!0):(this.tempProduct=U()({},a),this.isNew=!1),w()("#productModal").modal("show")},openDelModal:function(t){this.tempProduct=U()({},t),w()("#delProductModal").modal("show")},updateProduct:function(){var t=this,a="post",e="https://vue-course-api.hexschool.io/api/ighigoo/admin/product";t.isNew||(e="https://vue-course-api.hexschool.io/api/ighigoo/admin/product/"+t.tempProduct.id,a="put"),this.$http[a](e,{data:t.tempProduct}).then(function(a){a.data.success?(w()("#productModal").modal("hide"),t.getProducts()):(w()("#productModal").modal("hide"),t.getProducts(),console.log("新增失敗"))})},delProduct:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/admin/product/"+t.tempProduct.id;this.$http.delete(a).then(function(a){a.data.success&&(w()("#delProductModal").modal("hide"),t.getProducts(),console.log(a.data.message))})},uploadFile:function(){var t=this,a=this.$refs.files.files[0],e=this,s=new FormData;s.append("file-to-upload",a);e.status.fileUploading=!0,this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/admin/upload",s,{headers:{"Content-Type":"multipart/form-data"}}).then(function(a){e.status.fileUploading=!1,a.data.success?(e.$set(e.tempProduct,"imageUrl",a.data.imageUrl),t.$bus.$emit("message:push","圖片上傳成功","success")):t.$bus.$emit("message:push",a.data.message,"danger")})}},created:function(){this.getProducts()}},z={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"text-right mt-4"},[e("a",{staticClass:"btn btn-primary text-light",attrs:{href:"#"},on:{click:function(a){return t.openModal(!0)}}},[t._v("建立新商品")])]),t._v(" "),e("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.products,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.category))]),t._v(" "),e("td",[t._v(t._s(a.title))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.origin_price)))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(a.price)))]),t._v(" "),e("td",[1==a.is_enabled?e("span",{staticClass:"text-success"},[t._v("已啟用")]):e("span",{staticClass:"text-danger"},[t._v("未啟用")])]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#productModal"},on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{"data-toggle":"modal","data-target":"#delProductModal"},on:{click:function(e){return t.openDelModal(a)}}},[t._v("刪除")])])])}),0)]),t._v(" "),t.pagination?e("nav",{staticClass:"d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[t.pagination.total_pages>=0?e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getProducts(a)}}},[t._v(t._s(a))])])}),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getProducts(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2):t._e()]):t._e(),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"image"}},[t._v("輸入圖片網址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.imageUrl,expression:"tempProduct.imageUrl"}],staticClass:"form-control",attrs:{type:"text",id:"image",placeholder:"請輸入圖片連結"},domProps:{value:t.tempProduct.imageUrl},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"imageUrl",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"customFile"}},[t._v("\n                  或 上傳圖片\n                  "),t.status.fileUploading?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e()]),t._v(" "),e("input",{ref:"files",staticClass:"form-control",attrs:{type:"file",id:"customFile"},on:{change:t.uploadFile}})]),t._v(" "),e("img",{staticClass:"img-fluid",attrs:{img:"https://images.unsplash.com/photo-1483985988355-763728e1935b?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=828346ed697837ce808cae68d3ddc3cf&auto=format&fit=crop&w=1350&q=80",alt:"",src:t.tempProduct.imageUrl}})]),t._v(" "),e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("標題")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.title,expression:"tempProduct.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入標題"},domProps:{value:t.tempProduct.title},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"title",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("分類")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.category,expression:"tempProduct.category"}],staticClass:"form-control",attrs:{type:"text",id:"category",placeholder:"請輸入分類"},domProps:{value:t.tempProduct.category},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"category",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("單位")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.unit,expression:"tempProduct.unit"}],staticClass:"form-control",attrs:{type:"unit",id:"unit",placeholder:"請輸入單位"},domProps:{value:t.tempProduct.unit},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"unit",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"origin_price"}},[t._v("原價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.origin_price,expression:"tempProduct.origin_price"}],staticClass:"form-control",attrs:{type:"number",id:"origin_price",placeholder:"請輸入原價"},domProps:{value:t.tempProduct.origin_price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"origin_price",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"price"}},[t._v("售價")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.price,expression:"tempProduct.price"}],staticClass:"form-control",attrs:{type:"number",id:"price",placeholder:"請輸入售價"},domProps:{value:t.tempProduct.price},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"price",a.target.value)}}})])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"description"}},[t._v("產品描述")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.description,expression:"tempProduct.description"}],staticClass:"form-control",attrs:{type:"text",id:"description",placeholder:"請輸入產品描述"},domProps:{value:t.tempProduct.description},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"description",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"content"}},[t._v("說明內容")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.content,expression:"tempProduct.content"}],staticClass:"form-control",attrs:{type:"text",id:"content",placeholder:"請輸入產品說明內容"},domProps:{value:t.tempProduct.content},on:{input:function(a){a.target.composing||t.$set(t.tempProduct,"content",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempProduct.is_enabled,expression:"tempProduct.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempProduct.is_enabled)?t._i(t.tempProduct.is_enabled,null)>-1:t._q(t.tempProduct.is_enabled,1)},on:{change:function(a){var e=t.tempProduct.is_enabled,s=a.target,i=s.checked?1:0;if(Array.isArray(e)){var o=t._i(e,null);s.checked?o<0&&t.$set(t.tempProduct,"is_enabled",e.concat([null])):o>-1&&t.$set(t.tempProduct,"is_enabled",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.tempProduct,"is_enabled",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateProduct}},[t._v("確認")])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delProductModal",tabindex:"-1",role:"dialog","aria-labelledby":"delProductModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempProduct.title))]),t._v("\n          商品(刪除後將無法恢復)。\n        ")]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delProduct}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"120"}},[t._v("產品分類")]),t._v(" "),e("th",[t._v("產品名稱")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("原價")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("售價")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("啟用狀態")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("功能欄")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"productModalLabel"}},[a("span",[this._v("新增產品")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"delProductModalLabel"}},[a("span",[this._v("刪除產品")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var F=e("VU/8")(I,z,!1,function(t){e("DcH3")},null,null).exports,A={data:function(){return{coupons:[],tempCoupon:{},pagination:{},isNew:!1,isLoading:!1,status:{}}},methods:{getCoupons:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/admin/coupons?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(a).then(function(a){t.isLoading=!1,t.coupons=a.data.coupons,t.pagination=a.data.pagination})},openModal:function(t,a){t?(this.tempCoupon={},this.isNew=!0):(this.tempCoupon=U()({},a),this.isNew=!1),w()("#couponModal").modal("show")},openDelModal:function(t){this.tempCoupon=U()({},t),w()("#delCouponModal").modal("show")},updateCoupon:function(){var t=this,a="post",e="https://vue-course-api.hexschool.io/api/ighigoo/admin/coupon";t.isNew||(e="https://vue-course-api.hexschool.io/api/ighigoo/admin/coupon/"+t.tempCoupon.id,a="put"),this.$http[a](e,{data:t.tempCoupon}).then(function(a){a.data.success?(w()("#couponModal").modal("hide"),t.getCoupons()):(w()("#couponModal").modal("hide"),t.getCoupons(),console.log("新增失敗"))})},delCoupon:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/admin/coupon/"+t.tempCoupon.id;this.$http.delete(a).then(function(a){a.data.success&&(w()("#delCouponModal").modal("hide"),t.getCoupons(),console.log(a.data.message))})}},created:function(){this.getCoupons()}},V={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"text-right mt-4"},[e("a",{staticClass:"btn btn-primary",attrs:{href:"#"},on:{click:function(a){return t.openModal(!0)}}},[t._v("建立新優惠券")])]),t._v(" "),e("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.coupons,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.title))]),t._v(" "),e("td",[t._v(t._s(a.code))]),t._v(" "),e("td",[t._v(t._s(a.percent))]),t._v(" "),e("td",[t._v(t._s(a.due_date))]),t._v(" "),e("td",[1==a.is_enabled?e("span",{staticClass:"text-success"},[t._v("已啟用")]):e("span",{staticClass:"text-danger"},[t._v("未啟用")])]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#couponModal"},on:{click:function(e){return t.openModal(!1,a)}}},[t._v("編輯")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{"data-toggle":"modal","data-target":"#delCouponModal"},on:{click:function(e){return t.openDelModal(a)}}},[t._v("刪除")])])])}),0)]),t._v(" "),t.pagination.total_pages>=0?e("nav",{staticClass:"d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getCoupons(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getCoupons(a)}}},[t._v(t._s(a))])])}),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getCoupons(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]):t._e(),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"couponModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-8"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"title"}},[t._v("優惠券名稱")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.title,expression:"tempCoupon.title"}],staticClass:"form-control",attrs:{type:"text",id:"title",placeholder:"請輸入優惠券名稱"},domProps:{value:t.tempCoupon.title},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"title",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"category"}},[t._v("優惠券代碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.code,expression:"tempCoupon.code"}],staticClass:"form-control",attrs:{type:"text",id:"code",placeholder:"請輸入優惠券代碼"},domProps:{value:t.tempCoupon.code},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"code",a.target.value)}}})]),t._v(" "),e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"percent"}},[t._v("折價百分比")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.percent,expression:"tempCoupon.percent"}],staticClass:"form-control",attrs:{type:"unit",id:"percent",placeholder:"請輸入折價百分比"},domProps:{value:t.tempCoupon.percent},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"percent",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-6"},[e("label",{attrs:{for:"due-date"}},[t._v("到期日")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.due_date,expression:"tempCoupon.due_date"}],staticClass:"form-control",attrs:{type:"date",id:"due-date",placeholder:"請輸入到期日"},domProps:{value:t.tempCoupon.due_date},on:{input:function(a){a.target.composing||t.$set(t.tempCoupon,"due_date",a.target.value)}}})])]),t._v(" "),e("hr"),t._v(" "),e("div",{staticClass:"form-group"},[e("div",{staticClass:"form-check"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.tempCoupon.is_enabled,expression:"tempCoupon.is_enabled"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"is_enabled","true-value":1,"false-value":0},domProps:{checked:Array.isArray(t.tempCoupon.is_enabled)?t._i(t.tempCoupon.is_enabled,null)>-1:t._q(t.tempCoupon.is_enabled,1)},on:{change:function(a){var e=t.tempCoupon.is_enabled,s=a.target,i=s.checked?1:0;if(Array.isArray(e)){var o=t._i(e,null);s.checked?o<0&&t.$set(t.tempCoupon,"is_enabled",e.concat([null])):o>-1&&t.$set(t.tempCoupon,"is_enabled",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.tempCoupon,"is_enabled",i)}}}),t._v(" "),e("label",{staticClass:"form-check-label",attrs:{for:"is_enabled"}},[t._v("是否啟用")])])])])])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.updateCoupon}},[t._v("確認")])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delCouponModal",tabindex:"-1",role:"dialog","aria-labelledby":"delCouponModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(2),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempCoupon.title))]),t._v("\n          優惠券(刪除後將無法恢復)。\n        ")]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[t._v("取消")]),t._v(" "),e("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:t.delCoupon}},[t._v("確認刪除")])])])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"150"}},[t._v("優惠券名稱")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("優惠券代碼")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("折價百分比(%)")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("到期日")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("啟用狀態")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("功能欄")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"couponModalLabel"}},[a("span",[this._v("新增優惠券")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"delCouponModalLabel"}},[a("span",[this._v("刪除優惠券")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var j=e("VU/8")(A,V,!1,function(t){e("fzmc")},null,null).exports,H={data:function(){return{orders:[],tempOrder:{},pagination:{},isNew:!1,isLoading:!1,status:{}}},methods:{getOrders:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/admin/orders?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(a).then(function(a){t.isLoading=!1,t.orders=a.data.orders,t.pagination=a.data.pagination})},openModal:function(t,a){t?(this.tempOrder={},this.isNew=!0):(this.tempOrder=U()({},a),this.isNew=!1),w()("#orderModal").modal("show")},openDelModal:function(t){this.tempOrder=U()({},t),w()("#delOrderModal").modal("show")},updateOrder:function(){var t=this,a="post",e="https://vue-course-api.hexschool.io/api/ighigoo/admin/order";t.isNew||(e="https://vue-course-api.hexschool.io/api/ighigoo/admin/order/"+t.tempOrder.id,a="put"),this.$http[a](e,{data:t.tempOrder}).then(function(a){a.data.success?(w()("#orderModal").modal("hide"),t.getOrders()):(w()("#orderModal").modal("hide"),t.getOrders(),console.log("新增失敗"))})}},created:function(){this.getOrders()}},W={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("table",{staticClass:"table mt-4"},[t._m(0),t._v(" "),e("tbody",t._l(t.orders,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.id))]),t._v(" "),e("td",[t._v(t._s(a.create_at))]),t._v(" "),e("td",[a.is_paid?e("span",{staticClass:"text-success"},[t._v("O")]):e("span",{staticClass:"text-danger"},[t._v("X")])]),t._v(" "),e("td",[t._v(t._s(a.payment_method))]),t._v(" "),e("td",[t._v(t._s(a.message))]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-outline-primary btn-sm",attrs:{"data-toggle":"modal","data-target":"#orderModal"},on:{click:function(e){return t.openModal(!1,a)}}},[t._v("訂單內容")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{"data-toggle":"modal","data-target":"#delOrderModal"},on:{click:function(e){return t.openDelModal(a)}}},[t._v("刪除")])])])}),0)]),t._v(" "),t.pagination.total_pages>=0?e("nav",{staticClass:"d-flex justify-content-center",attrs:{"aria-label":"Page navigation example"}},[e("ul",{staticClass:"pagination"},[e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_pre}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Previous"},on:{click:function(a){return a.preventDefault(),t.getOrders(t.pagination.current_page-1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("«")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Previous")])])]),t._v(" "),t._l(t.pagination.total_pages,function(a){return e("li",{key:a,staticClass:"page-item",class:{active:t.pagination.current_page===a}},[e("a",{staticClass:"page-link",attrs:{href:"#"},on:{click:function(e){return e.preventDefault(),t.getOrders(a)}}},[t._v(t._s(a))])])}),t._v(" "),e("li",{staticClass:"page-item",class:{disabled:!t.pagination.has_next}},[e("a",{staticClass:"page-link",attrs:{href:"#","aria-label":"Next"},on:{click:function(a){return a.preventDefault(),t.getOrders(t.pagination.current_page+1)}}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("»")]),t._v(" "),e("span",{staticClass:"sr-only"},[t._v("Next")])])])],2)]):t._e(),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"orderModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog modal-lg",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-body"},[e("table",{staticClass:"table"},[t._m(2),t._v(" "),e("tbody",t._l(t.tempOrder.products,function(a){return e("tr",{key:a.id},[e("td",[t._v(t._s(a.product.title))]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(a.qty))])])}),0),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right"},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.tempOrder.total)))])])])])])])])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"delOrderModal",tabindex:"-1",role:"dialog","aria-labelledby":"delOrderModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content border-0"},[t._m(3),t._v(" "),e("div",{staticClass:"modal-body"},[t._v("\n          是否刪除\n          "),e("strong",{staticClass:"text-danger"},[t._v(t._s(t.tempOrder.title))]),t._v("\n          訂單(刪除後將無法恢復)。\n        ")]),t._v(" "),t._m(4)])])])],1)},staticRenderFns:[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("thead",[e("tr",[e("th",{attrs:{width:"150"}},[t._v("訂單編號")]),t._v(" "),e("th",{attrs:{width:"150"}},[t._v("建立時間")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("是否付款")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("付款方式")]),t._v(" "),e("th",{attrs:{width:"100"}},[t._v("留言")]),t._v(" "),e("th",{attrs:{width:"120"}},[t._v("功能欄")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-dark text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"orderModalLabel"}},[a("span",[this._v("訂單內容")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th",[this._v("商品名稱")]),this._v(" "),a("th",{staticClass:"text-right"},[this._v("數量")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-danger text-white"},[a("h5",{staticClass:"modal-title",attrs:{id:"delOrderModalLabel"}},[a("span",[this._v("刪除訂單")])]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button","data-dismiss":"modal"}},[this._v("取消")]),this._v(" "),a("button",{staticClass:"btn btn-danger",attrs:{type:"button"}},[this._v("確認刪除")])])}]};var Z=e("VU/8")(H,W,!1,function(t){e("HDE4")},null,null).exports,J={data:function(){return{products:[],product:{},productMod:{iceBtn:0,sweetBtn:0,sizeBtn:0},cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},status:{loadingItem:"",loadingCart:"",loadingCartModal:""},isLoading:!1,pagination:{},coupon_code:"",detailSetting:{ice:["正常冰","少冰","去冰"],sweet:["正常糖","少糖","無糖"],size:["M","L"]}}},methods:{getProducts:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(a).then(function(a){t.isLoading=!1,t.products=a.data.products,t.pagination=a.data.pagination})},getProduct:function(t){var a=this,e="https://vue-course-api.hexschool.io/api/ighigoo/product/"+t;a.status.loadingItem=t,this.$http.get(e).then(function(t){a.status.loadingItem="",a.product=t.data.product,a.product.num=0,w()("#productModal").modal("show")})},addtoCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this;0===s?i.status.loadingCart=t:i.status.loadingCartModal=t;var o={product_id:t,qty:e},r={ice:i.productMod.iceBtn,sweet:i.productMod.sweetBtn,size:i.productMod.sizeBtn,add:[]};this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/cart",{data:o}).then(function(t){if(t.data.success){0===s?i.status.loadingCart="":i.status.loadingCartModal="";var e=t.data.data,o={cart_id:e.id,product_id:e.product_id,qty:e.qty,detail:r};a.$http.post("https://protected-river-71754.herokuapp.com/carts",o).then(function(t){}),i.$bus.$emit("cartNav:reflash"),i.getCart()}})},getCart:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/cart").then(function(e){a.cart=e.data.data,t.$http.get("https://protected-river-71754.herokuapp.com/carts").then(function(e){var s=e.data;a.cart.carts.forEach(function(e,i){var o=s.find(function(t){return t.cart_id===e.id});t.$set(t.cart.carts[i],"detailId",o.id),t.$set(t.cart.carts[i],"detail",o.detail),a.isLoading=!1})})})},deleteCart:function(t,a){var e=this,s=this,i="https://vue-course-api.hexschool.io/api/ighigoo/cart/"+t,o="https://protected-river-71754.herokuapp.com/carts/"+a+" ";this.$http.delete(i).then(function(t){e.$http.delete(o).then(function(t){}),s.isLoading=!1,s.getCart(),s.$bus.$emit("cartNav:reflash"),console.log(t.data)})},deleteCartAll:function(){var t=this,a=this;this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/cart").then(function(e){a.cart=e.data.data,t.$http.get("https://protected-river-71754.herokuapp.com/carts").then(function(t){var e=t.data;a.cart.carts.forEach(function(t,s){var i=e.find(function(a){return a.cart_id===t.id});i?a.deleteCart(t.id,i.id):a.deleteCart(t.id,"")}),a.getCart(),a.isLoading=!1})})},addCouponCode:function(){var t=this,a={code:this.coupon_code};this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/coupon",{data:a}).then(function(a){a.data.success?t.getCart():console.log(a.data.message)})},CreateOrder:function(){var t=this,a=this,e=a.form;this.$validator.validate().then(function(s){s?(a.isLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/order",{data:e}).then(function(e){e.data.success?(console.log(e.data.message),t.getCart(),a.isLoading=!1):console.log(e.data.message)})):console.log("請填寫訂購人資訊")})}},created:function(){this.getProducts(),this.getCart()}},G={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row mt-4"},t._l(t.products,function(a){return e("div",{key:a.id,staticClass:"col-md-4 mb-4"},[1==a.is_enabled?e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticStyle:{height:"150px","background-size":"cover","background-position":"center"},style:{backgroundImage:"url("+a.imageUrl+")"}}),t._v(" "),e("div",{staticClass:"card-body"},[e("span",{staticClass:"badge badge-secondary float-right ml-2"},[t._v(t._s(a.category))]),t._v(" "),e("h5",{staticClass:"card-title"},[e("a",{staticClass:"text-dark",attrs:{href:"#"}},[t._v(t._s(a.title))])]),t._v(" "),e("p",{staticClass:"card-text"},[t._v("內容")]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.origin_price))+" 元")]),t._v(" "),a.price&&a.origin_price>a.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price))+" 元")]):t._e(),t._v(" "),a.price&&a.origin_price>a.price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(a.price))+" 元")]):e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.origin_price))+" 元")])])]),t._v(" "),e("div",{staticClass:"card-footer d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(a.id)}}},[a.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            查看更多\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-danger btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(a.id)}}},[a.id===t.status.loadingCart?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])]):t._e()])}),0),t._v(" "),e("div",[e("table",{staticClass:"table"},[e("thead",[e("th",[e("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:t.deleteCartAll}},[t._v("清空購物車")])]),t._v(" "),e("th",[t._v("品名")]),t._v(" "),e("th",[t._v("數量")]),t._v(" "),e("th",[t._v("單價")])]),t._v(" "),e("tbody",[e("tr"),t._v(" "),t._l(t.cart.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCart(a.id,a.detailId)}}},[e("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v("\n            "+t._s(a.product.title)+" ("+t._s(t.detailSetting.size[a.detail.size])+")\n            "),t._v(" "),e("span",{staticClass:"h6 text-danger font-detail"},[t._v("\n              "+t._s(t.detailSetting.ice[a.detail.ice])+" ,\n              "+t._s(t.detailSetting.sweet[a.detail.sweet])+"\n            ")]),t._v(" "),a.coupon?e("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})],2),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t._v(" "),t.cart.total!==t.cart.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])]),t._v(" "),t.cart.final_total===t.cart.total?e("div",{staticClass:"input-group mb-3 input-group-sm"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coupon_code,expression:"coupon_code"}],staticClass:"form-control",attrs:{type:"text",placeholder:"請輸入優惠碼"},domProps:{value:t.coupon_code},on:{click:function(a){return!a.type.indexOf("key")&&t._k(a.keyCode,"enter",13,a.key,"Enter")?null:t.addCouponCode(a)},input:function(a){a.target.composing||(t.coupon_code=a.target.value)}}}),t._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addCouponCode(a)}}},[t._v("套用優惠碼")])])]):t._e(),t._v(" "),e("h5",{staticClass:"py-3 mt-5 mb-2 text-center bg-light"},[t._v("訂購人資訊")]),t._v(" "),e("form",{attrs:{id:"needs-validation",novalidate:""},on:{submit:function(a){return a.preventDefault(),t.CreateOrder(a)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"username"}},[t._v("姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",id:"username",placeholder:"請輸入姓名",name:"name"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",id:"email",placeholder:"請輸入Email",name:"email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"tel"}},[t._v("手機號碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required|digits:10",expression:"'required|digits:10'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",id:"tel",placeholder:"請輸入手機號碼",name:"tel"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t._v(" "),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("請輸入手機號碼")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"address"}},[t._v("地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",id:"address",placeholder:"請輸入地址",name:"address"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("請輸入地址")]):t._e()])]),t._v(" "),t._m(0)])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._v(" "),t._m(1)]),t._v(" "),e("div",{staticClass:"modal-body"},[e("img",{staticClass:"img-fluid",attrs:{src:t.product.imageUrl,alt:""}}),t._v(" "),e("blockquote",{staticClass:"blockquote mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[t.product.price?t._e():e("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t._v(" "),t.product.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t._v(" "),t.product.price?e("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between my-1"},[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"iceBtn"}},[e("button",{staticClass:"btn btn-outline-secondary",class:{active:0===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=0}}},[t._v("正常")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",class:{active:1===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=1}}},[t._v("少冰")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",class:{active:2===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=2}}},[t._v("去冰")])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"sweetBtn"}},[e("button",{staticClass:"btn btn-outline-secondary",class:{active:0===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=0}}},[t._v("正常")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",class:{active:1===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=1}}},[t._v("少糖")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",class:{active:2===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=2}}},[t._v("無糖")])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"sizeBtn"}},[e("button",{staticClass:"btn btn-outline-secondary",class:{active:0===t.productMod.sizeBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sizeBtn=0}}},[t._v("M")]),t._v(" "),e("button",{staticClass:"btn btn-outline-secondary",class:{active:1===t.productMod.sizeBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sizeBtn=1}}},[t._v("L")])])]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control mt-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"num",a.target.multiple?e:e[0])}}},[e("option",{attrs:{value:"0",disabled:"",selected:"",hidden:""}},[t._v("請選擇數量")]),t._v(" "),t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" "+t._s(t.product.unit))])})],2)]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n            小計\n            "),e("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(a){return t.addtoCart(t.product.id,t.product.num,1)}}},[t.product.id===t.status.loadingCartModal?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"text-right"},[a("a",{staticClass:"btn btn-secondary",attrs:{href:"shoppingCart.html"}},[this._v("繼續選購")]),this._v(" "),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[this._v("確認付款")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var X=e("VU/8")(J,G,!1,function(t){e("+GFq")},null,null).exports,Y={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("b-carousel",{staticClass:"heightVH--80",staticStyle:{"text-shadow":"1px 1px 2px #333",width:"100%"},attrs:{id:"carousel-1",interval:4e3,controls:"",indicators:"","img-width":"1024",background:"#ababab"},on:{"sliding-start":t.onSlideStart,"sliding-end":t.onSlideEnd},model:{value:t.slide,callback:function(a){t.slide=a},expression:"slide"}},[e("b-carousel-slide",[e("img",{staticClass:"d-block w-100 heightVH--80 fit",attrs:{slot:"img",src:"https://images.unsplash.com/photo-1524156868115-e696b44983db",alt:"image slot"},slot:"img"})]),t._v(" "),e("b-carousel-slide",[e("img",{staticClass:"d-block w-100 heightVH--80 over-hidden fit",attrs:{slot:"img",src:"https://images.unsplash.com/photo-1455146106369-1e31beb07fce",alt:"image slot"},slot:"img"})]),t._v(" "),e("b-carousel-slide",[e("img",{staticClass:"d-block w-100 heightVH--80 fit",attrs:{slot:"img",src:"https://images.unsplash.com/photo-1515094264130-1c21fc4c9dcd",alt:"image slot"},slot:"img"})]),t._v(" "),e("b-carousel-slide",[e("img",{staticClass:"d-block w-100 heightVH--80 fit",attrs:{slot:"img",src:"https://images.unsplash.com/photo-1422207175003-e5b7d45ceb7b",alt:"image slot"},slot:"img"})])],1)],1)},staticRenderFns:[]};var K=e("VU/8")({data:function(){return{slide:0,sliding:null}},methods:{onSlideStart:function(t){this.sliding=!0},onSlideEnd:function(t){this.sliding=!1}}},Y,!1,function(t){e("MbL5"),e("aw01")},null,null).exports,Q=e("gRE1"),tt=e.n(Q),at={data:function(){return{products:[],orderList:[],isLoading:!1,orderTotalPages:0,status:{loadingCart:""},settingStatus:{products:!1,orderList:!1},classRank:{order:{md:["2","1","3"],sm:["1","2","3"]},rank:{box:{mod:["first","second","third"]}}}}},methods:{getProducts:function(){var t=this;t.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/products/all").then(function(a){t.isLoading=!1,t.products=a.data.products,t.filterProductsActive(),t.settingStatus.products=!0})},filterProductsActive:function(){this.products=this.products.filter(function(t){return 1===t.is_enabled})},getOrderList:function(){for(var t=this,a=t.orderTotalPages,e=[],s=1;s<=a;s++){var i="https://vue-course-api.hexschool.io/api/ighigoo/orders?page="+s,o=t.axios.get(i);e.push(o)}t.axios.all(e).then(t.axios.spread(function(){for(var a=arguments.length,e=Array(a),s=0;s<a;s++)e[s]=arguments[s];tt()(e).map(function(t){return t.data}).forEach(function(a){var e=[];a.orders.forEach(function(t){e.push(t.products)}),e.forEach(function(a){var e=tt()(a).map(function(t){return{productId:t.product_id,qty:t.qty,product:t.product}});t.orderList=t.orderList.concat(e)})}),t.settingStatus.orderList=!0}))},getOrderTotalPages:function(){var t=this;this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/orders?page=1").then(function(a){return t.orderTotalPages=a.data.pagination.total_pages,!0})},countSaleNum:function(){var t=this;t.products.forEach(function(a,e){for(var s=t.orderList.filter(function(t){return a.id===t.productId}),i=0,o=0;o<s.length;o++)i+=s[o].qty;t.$set(t.products[e],"saleNum",i)})},sortProducts:function(){this.products.sort(function(t,a){return a.saleNum-t.saleNum})},addtoCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],this),i={ice:0,sweet:0,size:0,add:[]};s.status.loadingCart=t;var o={product_id:t,qty:e};this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/cart",{data:o}).then(function(t){if(t.data.success){s.status.loadingCart="";var e=t.data.data;s.$bus.$emit("message:push",e.product.title+"成功加入購物車","success");var o={cart_id:e.id,product_id:e.product_id,qty:e.qty,detail:i};a.$http.post("https://protected-river-71754.herokuapp.com/carts",o).then(function(t){s.$bus.$emit("cartNav:reflash")})}})}},created:function(){this.getOrderTotalPages()},watch:{orderTotalPages:{handler:function(t){this.getProducts(),this.getOrderList()},deep:!0},settingStatus:{handler:function(t){t.products&&t.orderList&&(this.countSaleNum(),this.sortProducts())},deep:!0}}},et={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"row"},t._l(t.products.slice(0,3),function(a,s){return e("div",{key:s,staticClass:"col-md-4 col-sm-9 mb-4 mx-auto mb-5",class:["order-md-"+t.classRank.order.md[s],"order-sm-"+t.classRank.order.sm[s]]},[e("div",{staticClass:"rank"},[e("div",{staticClass:"rank__box",class:"rank__box--"+t.classRank.rank.box.mod[s]},[e("i",{staticClass:"fas fa-crown rank__icon"})])]),t._v(" "),e("div",{staticClass:"card border-0 box-shadow text-center h-100"},[e("div",{staticClass:"rank"}),t._v(" "),e("div",{staticClass:"card-title card-title--slide d-flex justify-content-center align-items-center w-auto h-10 px-3 py-1"},[e("h5",{staticClass:"text-light font-weight-bold text-nowrap"},[t._v(t._s(a.title))])]),t._v(" "),e("div",{staticClass:"card__img"},[e("img",{staticClass:"card-img-top",attrs:{src:a.imageUrl,alt:"Card image cap"}})]),t._v(" "),e("div",{staticClass:"card-footer card-footer--slide w-100 h-20"},[e("router-link",{staticClass:"btn btn-secondary btn--slide w-50",attrs:{tag:"button",to:"/Shopping/Shopping_List"}},[t._v("查看更多")]),t._v(" "),e("button",{staticClass:"btn btn-primary-dark btn--slide d-block w-50",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(a.id)}}},[a.id===t.status.loadingCart?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"fas fa-shopping-cart mr-1"}),t._v("\n            來一杯\n          ")])],1)])])}),0)])},staticRenderFns:[]};var st=e("VU/8")(at,et,!1,function(t){e("fZLP")},"data-v-67e695f7",null).exports,it={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("footer",{staticClass:"container-fluid bg-primary-light d-flex flex-column justify-content-center align-items-center py-4 text-center"},[a("p",[this._v("© Copright 2019 好喝飲料鋪")]),this._v(" "),a("p",[this._v("練習作品無商業用途")])])])}]};var ot=e("VU/8")({},it,!1,function(t){e("v5mg")},"data-v-735f1812",null).exports,rt={components:{Navbar:N,Carousel:K,HotSales:st,Footer:ot,Alert:q}},nt={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("Navbar"),this._v(" "),a("Alert"),this._v(" "),a("div",{staticClass:"container-fliud"},[a("Carousel")],1),this._v(" "),a("main",{staticClass:"container-fluid bg-main",attrs:{role:"main"}},[a("div",{staticClass:"container"},[a("div",{staticClass:"row"},[this._m(0),this._v(" "),a("HotSales")],1)])]),this._v(" "),a("Footer")],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"d-flex text-center mx-auto mb-5"},[a("h2",{staticClass:"text-primary-dark text-background px-5 py-3"},[this._v("暢銷飲品")])])}]};var ct=e("VU/8")(rt,nt,!1,function(t){e("IJOW")},null,null).exports,lt={data:function(){return{coupons:[{code:"666666",percent:66,title:"六六六",degrees:{from:0,to:0}},{code:"C8763",percent:87,title:"星爆爆",degrees:{from:0,to:0}},{code:"",percent:100,title:"銘謝惠顧",degrees:{from:0,to:0}}],degreePerCoupon:0,turnTable:{nowDegree:0,targetDeg:3690,rotatNum:10},resultCoupon:{},isRunning:!1}},methods:{startTurning:function(){var t=this,a=Math.floor(360*Math.random());t.turnTable.targetDeg=a+360*t.turnTable.rotatNum,t.updateTurntableStatus(),t.isRunning=!0,setTimeout(function(){t.turnTable.nowDegree=t.turnTable.targetDeg%360,t.updateTurntableStatus(),t.getResulrCoupon(),t.emitResultCoupon(),t.isRunning=!1},2e3)},emitResultCoupon:function(){this.$emit("getCoupon",this.resultCoupon)},getResulrCoupon:function(){var t=this.turnTable.nowDegree,a=this.coupons.find(function(a){return a.degrees.to>a.degrees.from?t<=a.degrees.from&&t>=0||t>a.degrees.to&&t<=360:t<=a.degrees.from&&t>a.degrees.to});this.resultCoupon=a},updateTurntableStatus:function(){document.documentElement.style.setProperty("--targetDeg",this.turnTable.targetDeg+"deg"),document.documentElement.style.setProperty("--nowDeg",this.turnTable.nowDegree+"deg")},couponsDegreeSetting:function(){var t=this;t.degreePerCoupon=360/t.coupons.length;var a=0+t.degreePerCoupon/2;t.coupons.forEach(function(e){e.degrees.from=a,e.degrees.to=(a-t.degreePerCoupon+360)%360,a=e.degrees.to})}},created:function(){this.couponsDegreeSetting()}},dt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"turntable"},[e("div",{ref:"turntable",staticClass:"turntable__table",class:{"turntable__table--turning":t.isRunning},attrs:{id:"turntable"}},[t._m(0),t._v(" "),e("ul",{staticClass:"turntable__list",attrs:{id:"turntable_list"}},t._l(t.coupons,function(a){return e("li",{key:a.code,staticClass:"turntable__coupon"},[e("span",{staticClass:"turntable__text"},[t._v(t._s(a.title))])])}),0)]),t._v(" "),e("div",{staticClass:"pointer disabled",attrs:{id:"turntable_pointer"},on:{click:function(a){return a.preventDefault(),t.startTurning(a)}}},[e("div",{staticClass:"pointer__triangle"}),t._v(" "),t._m(1)])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"turntable__bg"},[a("div",{staticClass:"turntable__bg-block"}),this._v(" "),a("div",{staticClass:"turntable__bg-block"}),this._v(" "),a("div",{staticClass:"turntable__bg-block"})])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"pointer__circle"},[a("span",{staticClass:"pointer__text"},[this._v("抽獎")])])}]};var ut=e("VU/8")(lt,dt,!1,function(t){e("tUw4")},null,null).exports,pt={components:{TurnTable:ut},data:function(){return{coupon:{title:"",code:""}}},methods:{getTurntableCoupon:function(t){this.coupon=t,this.addCouponCode()},addCouponCode:function(){var t=this,a={code:t.coupon.code};setTimeout(function(){w()("#turntableModal").modal("hide"),w()(".modal-backdrop").remove(),w()("body").removeClass("modal-open"),w()("body").css("padding-right","0")},1500),this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/coupon",{data:a}).then(function(a){a.data.success?(t.$bus.$emit("cartOrder:reflash"),t.$bus.$emit("cartNav:reflash"),t.$bus.$emit("message:push","已使用優惠券: "+t.coupon.title,"success")):console.log(a.data.message)})}}},vt={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[this._m(0),this._v(" "),a("div",{staticClass:"modal fade",attrs:{id:"turntableModal",tabindex:"-1",role:"dialog","aria-labelledby":"turntableModal","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[this._m(1),this._v(" "),a("div",{staticClass:"modal-body d-flex justify-content-center bg-primary-bg"},[a("TurnTable",{on:{getCoupon:this.getTurntableCoupon}})],1)])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"icon btn btn-primary d-flex flex-column justify-content-center text-center text-light p-3",attrs:{"data-toggle":"modal","data-target":"#turntableModal"}},[a("i",{staticClass:"fas fa-money-bill-wave fa-5x"}),this._v(" "),a("h5",{staticClass:"mt-1"},[this._v("優惠轉盤")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("div",{staticClass:"modal-header bg-primary"},[a("h5",{staticClass:"modal-title text-light",attrs:{id:"turntableModalLabel"}},[this._v("優惠轉盤")]),this._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])])}]};var mt={components:{Navbar:N,Footer:ot,TurnTableIcon:e("VU/8")(pt,vt,!1,function(t){e("EVWC")},"data-v-6698ccac",null).exports,Alert:q},data:function(){return{isShowIcon:!1,isDiscount:!1,isOrderPage:!1}},methods:{checkRoute:function(){"Order"===this.$route.name?this.isOrderPage=!0:this.isOrderPage=!1,this.showIcon()},showIcon:function(){this.isDiscount&&this.isOrderPage?this.isShowIcon=!0:this.isShowIcon=!1}},created:function(){var t=this;t.checkRoute(),t.$bus.$on("cartOrder:isDiscount",function(a){t.isDiscount=a,t.showIcon()})},watch:{$route:function(t,a){this.checkRoute()}}},ht={render:function(){var t=this.$createElement,a=this._self._c||t;return a("div",[a("Navbar"),this._v(" "),a("Alert"),this._v(" "),a("div",{staticClass:"container-fluid main bg-main py-5"},[a("div",{staticClass:"container"},[a("router-view")],1),this._v(" "),this.isShowIcon?a("TurnTableIcon"):this._e()],1),this._v(" "),a("Footer")],1)},staticRenderFns:[]};var _t=e("VU/8")(mt,ht,!1,function(t){e("dRra")},null,null).exports,gt={data:function(){return{products:[],product:{},productMod:{iceBtn:0,sweetBtn:0,sizeBtn:0},lists:[{type:"all",typeName:"全部",iconClass:"fa-glass-cheers"},{type:"juice",typeName:"果汁",iconClass:"fa-cocktail"},{type:"tea",typeName:"茶",iconClass:"fa-leaf"},{type:"coffee",typeName:"咖啡",iconClass:"fa-mug-hot"},{type:"bubble",typeName:"氣泡",iconClass:"fa-wine-bottle"}],listNow:"全部",cart:{},status:{loadingItem:"",loadingCart:"",loadingCartModal:""},isLoading:!1,pagination:{},defaultNum:""}},methods:{getProducts:function(){var t=this,a="https://vue-course-api.hexschool.io/api/ighigoo/products?page="+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1);t.isLoading=!0,this.$http.get(a).then(function(a){t.isLoading=!1,t.products=a.data.products.filter(function(t){return 1===t.is_enabled}),t.pagination=a.data.pagination})},getProduct:function(t){var a=this,e="https://vue-course-api.hexschool.io/api/ighigoo/product/"+t;a.status.loadingItem=t,this.$http.get(e).then(function(t){a.status.loadingItem="",t.data.product.num=1,a.product=t.data.product,w()("#productModal").modal("show")})},addtoCart:function(t){var a=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this,o={ice:0,sweet:0,size:0,add:[]};0===s?i.status.loadingCart=t:(i.status.loadingCartModal=t,o={ice:i.productMod.iceBtn,sweet:i.productMod.sweetBtn,size:i.productMod.sizeBtn,add:[]});var r={product_id:t,qty:e};this.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/cart",{data:r}).then(function(t){if(t.data.success){0===s?i.status.loadingCart="":(i.status.loadingCartModal="",w()("#productModal").modal("hide"));var e=t.data.data;i.$bus.$emit("message:push",e.product.title+"成功加入購物車","success");var r={cart_id:e.id,product_id:e.product_id,qty:e.qty,detail:o};a.$http.post("https://protected-river-71754.herokuapp.com/carts",r).then(function(t){i.$bus.$emit("cartNav:reflash")})}})},listClick:function(t){this.listNow=t.typeName}},computed:{getComputeProducts:function(){var t=this;return"全部"===t.listNow?t.products:t.products.filter(function(a,e,s){return a.category===t.listNow})}},created:function(){this.getProducts()}},ft={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("loading",{attrs:{active:t.isLoading},on:{"update:active":function(a){t.isLoading=a}}}),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-3 mb-5"},[e("div",{staticClass:"list-group sticky-top sticky-top--fixNav"},t._l(t.lists,function(a){return e("a",{key:a.type,staticClass:"list-group-item list-group-item-action",class:{active:a.typeName===t.listNow},attrs:{"data-toggle":"list",id:"#"+a.type,href:"#"},on:{click:function(e){return e.preventDefault(),t.listClick(a)}}},[e("i",{staticClass:"fa mr-2",class:a.iconClass,attrs:{"aria-hidden":"true"}}),t._v("\n          "+t._s(a.typeName)+"\n        ")])}),0)]),t._v(" "),e("div",{staticClass:"col-md-9"},[e("div",{staticClass:"row"},t._l(t.getComputeProducts,function(a){return e("div",{key:a.id,staticClass:"col-md-6 col-lg-4 mb-4"},[1==a.is_enabled?e("div",{staticClass:"card border-0 shadow-sm"},[e("div",{staticClass:"card-title bg-primary mb-0 px-3 py-2"},[e("span",{staticClass:"badge badge-primary-dark text-gray float-right p-1 mt-1"},[t._v(t._s(a.category))]),t._v(" "),e("h5",{staticClass:"font-weight-bold"},[e("a",{staticClass:"text-gray",attrs:{href:"#"}},[t._v(t._s(a.title))])])]),t._v(" "),e("div",{staticClass:"card-body bg-img px-1 py-0"},[e("div",{staticClass:"card-img",style:{backgroundImage:"url("+a.imageUrl+")"}})]),t._v(" "),e("div",{staticClass:"card-body bg-light"},[e("div",{staticClass:"d-flex justify-content-between align-items-baseline"},[a.price?t._e():e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.origin_price)))]),t._v(" "),a.price&&a.origin_price>a.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t._f("currency")(a.origin_price)))]):t._e(),t._v(" "),a.price&&a.origin_price>a.price?e("div",{staticClass:"h5"},[t._v("現在只要 "+t._s(t._f("currency")(a.price)))]):e("div",{staticClass:"h5"},[t._v(t._s(t._f("currency")(a.origin_price)))])])]),t._v(" "),e("div",{staticClass:"card-footer bg-primary-bg d-flex"},[e("button",{staticClass:"btn btn-outline-secondary btn-sm",attrs:{type:"button"},on:{click:function(e){return t.getProduct(a.id)}}},[a.id===t.status.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n                查看更多\n              ")]),t._v(" "),e("button",{staticClass:"btn btn-outline-success btn-sm ml-auto",attrs:{type:"button"},on:{click:function(e){return t.addtoCart(a.id)}}},[a.id===t.status.loadingCart?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n                加到購物車\n              ")])])]):t._e()])}),0),t._v(" "),e("div",{staticClass:"row"})])]),t._v(" "),e("div",{staticClass:"modal fade",attrs:{id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog",attrs:{role:"document"}},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header bg-primary-dark"},[e("h5",{staticClass:"modal-title text-light",attrs:{id:"exampleModalLabel"}},[t._v(t._s(t.product.title))]),t._v(" "),t._m(0)]),t._v(" "),e("div",{staticClass:"modal-body bg-light p-0"},[e("div",{staticClass:"d-flex bg-primary-bg pb-1"},[e("img",{staticClass:"img-fluid mx-auto",attrs:{src:t.product.imageUrl,alt:""}})]),t._v(" "),e("div",{},[e("blockquote",{staticClass:"blockquote mx-3 mt-3"},[e("p",{staticClass:"mb-0"},[t._v(t._s(t.product.content))]),t._v(" "),e("footer",{staticClass:"blockquote-footer text-right"},[t._v(t._s(t.product.description))])]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between align-items-baseline mx-3"},[t.product.price?t._e():e("div",{staticClass:"h4"},[t._v(t._s(t.product.origin_price)+" 元")]),t._v(" "),t.product.price?e("del",{staticClass:"h6"},[t._v("原價 "+t._s(t.product.origin_price)+" 元")]):t._e(),t._v(" "),t.product.price?e("div",{staticClass:"h4"},[t._v("現在只要 "+t._s(t.product.price)+" 元")]):t._e()]),t._v(" "),e("div",{staticClass:"d-flex justify-content-between mx-3 my-1"},[e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"iceBtn"}},[e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:0===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=0}}},[t._v("正常")]),t._v(" "),e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:1===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=1}}},[t._v("少冰")]),t._v(" "),e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:2===t.productMod.iceBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.iceBtn=2}}},[t._v("去冰")])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"sweetBtn"}},[e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:0===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=0}}},[t._v("正常")]),t._v(" "),e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:1===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=1}}},[t._v("少糖")]),t._v(" "),e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:2===t.productMod.sweetBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sweetBtn=2}}},[t._v("無糖")])]),t._v(" "),e("div",{staticClass:"btn-group",attrs:{role:"group","aria-label":"sizeBtn"}},[e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:0===t.productMod.sizeBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sizeBtn=0}}},[t._v("M")]),t._v(" "),e("button",{staticClass:"btn btn-outline-primary-dark",class:{active:1===t.productMod.sizeBtn},attrs:{type:"button"},on:{click:function(a){t.productMod.sizeBtn=1}}},[t._v("L")])])]),t._v(" "),t.product.id?e("select",{directives:[{name:"model",rawName:"v-model",value:t.product.num,expression:"product.num"}],staticClass:"form-control w-93 mx-3 my-3",attrs:{name:""},on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.$set(t.product,"num",a.target.multiple?e:e[0])}}},t._l(10,function(a){return e("option",{key:a,domProps:{value:a}},[t._v("選購 "+t._s(a)+" "+t._s(t.product.unit))])}),0):t._e()])]),t._v(" "),e("div",{staticClass:"modal-footer bg-primary-light"},[e("div",{staticClass:"text-muted text-nowrap mr-3"},[t._v("\n            小計\n            "),e("strong",[t._v(t._s(t.product.num*t.product.price))]),t._v(" 元\n          ")]),t._v(" "),e("button",{staticClass:"btn btn-primary-dark text-light",attrs:{type:"button"},on:{click:function(a){return t.addtoCart(t.product.id,t.product.num,1)}}},[t.product.id===t.status.loadingCartModal?e("i",{staticClass:"fas fa-spinner fa-spin"}):t._e(),t._v("\n            加到購物車\n          ")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[this._v("×")])])}]};var bt=e("VU/8")(gt,ft,!1,function(t){e("uVsq")},"data-v-39f051a1",null).exports,Ct={components:{TurnTable:ut},data:function(){return{cart:{},form:{user:{name:"",email:"",tel:"",address:""},message:""},loadingItem:"",detailSetting:{ice:["正常冰","少冰","去冰"],sweet:["正常糖","少糖","無糖"],size:["M","L"]},isOrder:!1}},methods:{getCart:function(){var t=this,a=this;a.isLoading=!0,this.$http.get("https://vue-course-api.hexschool.io/api/ighigoo/cart").then(function(e){a.cart=e.data.data,t.$http.get("https://protected-river-71754.herokuapp.com/carts").then(function(t){var e=t.data;a.cart.carts.forEach(function(t,s){var i=e.find(function(a){return a.cart_id===t.id});console.log(i),a.$set(a.cart.carts[s],"detailId",i.id),a.$set(a.cart.carts[s],"detail",i.detail),a.isLoading=!1}),a.checkDiscount()})})},deleteCart:function(t,a){var e=this,s=this,i="https://vue-course-api.hexschool.io/api/ighigoo/cart/"+t,o="https://protected-river-71754.herokuapp.com/carts/"+a+" ";s.loadingItem=t,this.$http.delete(i).then(function(t){e.$http.delete(o).then(function(t){s.getCart(),s.$bus.$emit("cartNav:reflash")})})},CreateOrder:function(){var t=this,a=this;if(0!==a.cart.carts.length){var e=a.form;this.$validator.validate().then(function(s){s?(a.isLoading=!0,t.$http.post("https://vue-course-api.hexschool.io/api/ighigoo/order",{data:e}).then(function(t){t.data.success?(a.payOrder(t.data.orderId),a.getCart(),a.$bus.$emit("cartNav:reflash"),a.isOrder=!0,a.isLoading=!1):console.log(t.data.message)})):console.log("請填寫訂購人資訊")})}else a.$bus.$emit("message:push","購物車尚無選購商品","danger")},payOrder:function(t){var a="https://vue-course-api.hexschool.io/api/ighigoo/pay/"+t;this.$http.post(a).then(function(t){t.data.success&&console.log(t.data.message)})},checkDiscount:function(){var t=this,a=!1;t.cart&&t.cart.carts.length>0&&t.cart.final_total===t.cart.total&&(a=!0),t.$bus.$emit("cartOrder:isDiscount",a)}},created:function(){var t=this;t.getCart(),t.$bus.$on("cartOrder:reflash",function(){t.getCart()})}},yt={render:function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("div",{staticClass:"container bg-order p-5"},[e("h1",{staticClass:"text-center text-primary font-weight-bold mb-3"},[t._v("結帳")]),t._v(" "),e("section",{staticClass:"form-row align-items-center text-center"},[e("div",{staticClass:"col"},[e("div",{staticClass:"alert alert-rounded mb-0",class:{"alert-success":!t.isOrder,"alert-transparent":t.isOrder},attrs:{role:"alert"}},[t._v("輸入訂單資料")])]),t._v(" "),e("div",{staticClass:"col"},[e("div",{staticClass:"alert alert-rounded mb-0",class:{"alert-success":t.isOrder,"alert-transparent":!t.isOrder},attrs:{role:"alert"}},[t._v("完成")])])]),t._v(" "),t.isOrder?e("section",{staticClass:"row justify-content-center mt-5"},[e("div",{staticClass:"w-50 py-3 mt-3 mb-3 text-center bg-primary-bg",staticStyle:{"border-radius":"0.25rem"}},[e("h3",{staticClass:"text-primary mb-5"},[t._v("感謝您的訂購")]),t._v(" "),e("router-link",{staticClass:"btn btn-secondary",attrs:{to:"/Shopping/Shopping_List"}},[t._v("繼續選購")])],1)]):e("section",{staticClass:"row justify-content-center mt-5"},[e("div",{staticClass:"col-md-8"},[e("div",{staticClass:"card bg-primary-bg"},[e("div",{staticClass:"card-header",attrs:{id:"headingOne"}},[e("h6",{staticClass:"mb-0 d-flex align-items-center"},[t._m(0),t._v(" "),t.cart.total!==t.cart.final_total?e("span",{staticClass:"h3 ml-auto mb-0 text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))]):e("span",{staticClass:"h3 ml-auto mb-0"},[t._v(t._s(t._f("currency")(t.cart.total)))])])])]),t._v(" "),e("div",{staticClass:"collapse",attrs:{id:"collapseOne"}},[e("table",{staticClass:"table bg-primary-bg"},[t._m(1),t._v(" "),e("tbody",[0===t.cart.carts.length?e("tr",[e("td",{staticClass:"text-center",attrs:{colspan:"4"}},[t._v("購物車尚無選購商品")])]):t._e(),t._v(" "),t._l(t.cart.carts,function(a){return e("tr",{key:a.id},[e("td",{staticClass:"align-middle"},[e("button",{staticClass:"btn btn-outline-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.deleteCart(a.id,a.detailId)}}},[a.id===t.loadingItem?e("i",{staticClass:"fas fa-spinner fa-spin"}):e("i",{staticClass:"far fa-trash-alt"})])]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v("\n                  "+t._s(a.product.title)+" ("+t._s(t.detailSetting.size[a.detail.size])+")\n                  "),t._v(" "),e("span",{staticClass:"h6 text-danger font-detail"},[t._v("\n                    "+t._s(t.detailSetting.ice[a.detail.ice])+" ,\n                    "+t._s(t.detailSetting.sweet[a.detail.sweet])+"\n                  ")]),t._v(" "),a.coupon?e("div",{staticClass:"text-success"},[t._v("已套用優惠券")]):t._e()]),t._v(" "),e("td",{staticClass:"align-middle"},[t._v(t._s(a.qty)+"/"+t._s(a.product.unit))]),t._v(" "),e("td",{staticClass:"align-middle text-right"},[t._v(t._s(t._f("currency")(a.final_total)))])])})],2),t._v(" "),e("tfoot",[e("tr",[e("td",{staticClass:"text-right",attrs:{colspan:"3"}},[t._v("總計")]),t._v(" "),e("td",{staticClass:"text-right"},[t._v(t._s(t._f("currency")(t.cart.total)))])]),t._v(" "),t.cart.total!==t.cart.final_total?e("tr",[e("td",{staticClass:"text-right text-success",attrs:{colspan:"3"}},[t._v("折扣價")]),t._v(" "),e("td",{staticClass:"text-right text-success"},[t._v(t._s(t._f("currency")(t.cart.final_total)))])]):t._e()])])]),t._v(" "),e("h5",{staticClass:"py-3 mt-3 mb-3 text-center text-primary bg-primary-bg",staticStyle:{"border-radius":"0.25rem"}},[t._v("訂購人資訊")]),t._v(" "),e("form",{attrs:{id:"needs-validation",novalidate:""},on:{submit:function(a){return a.preventDefault(),t.CreateOrder(a)}}},[e("div",{staticClass:"form-row"},[e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"username"}},[t._v("姓名")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.name,expression:"form.user.name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("name")},attrs:{type:"text",id:"username",placeholder:"請輸入姓名",name:"name"},domProps:{value:t.form.user.name},on:{input:function(a){a.target.composing||t.$set(t.form.user,"name",a.target.value)}}}),t._v(" "),t.errors.has("name")?e("span",{staticClass:"text-danger"},[t._v("請輸入姓名")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"email"}},[t._v("Email")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.email,expression:"form.user.email"},{name:"validate",rawName:"v-validate",value:"required|email",expression:"'required|email'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("email")},attrs:{type:"email",id:"email",placeholder:"請輸入Email",name:"email"},domProps:{value:t.form.user.email},on:{input:function(a){a.target.composing||t.$set(t.form.user,"email",a.target.value)}}}),t._v(" "),t.errors.has("email")?e("span",{staticClass:"text-danger"},[t._v(t._s(t.errors.first("email")))]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"tel"}},[t._v("手機號碼")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.tel,expression:"form.user.tel"},{name:"validate",rawName:"v-validate",value:"required|digits:10",expression:"'required|digits:10'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("tel")},attrs:{type:"text",id:"tel",placeholder:"請輸入手機號碼",name:"tel"},domProps:{value:t.form.user.tel},on:{input:function(a){a.target.composing||t.$set(t.form.user,"tel",a.target.value)}}}),t._v(" "),t.errors.has("tel")?e("span",{staticClass:"text-danger"},[t._v("請輸入手機號碼")]):t._e()]),t._v(" "),e("div",{staticClass:"form-group col-md-8 mx-auto"},[e("label",{attrs:{for:"address"}},[t._v("地址")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.user.address,expression:"form.user.address"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],staticClass:"form-control",class:{"is-invalid":t.errors.has("address")},attrs:{type:"text",id:"address",placeholder:"請輸入地址",name:"address"},domProps:{value:t.form.user.address},on:{input:function(a){a.target.composing||t.$set(t.form.user,"address",a.target.value)}}}),t._v(" "),t.errors.has("address")?e("span",{staticClass:"text-danger"},[t._v("請輸入地址")]):t._e()])]),t._v(" "),e("div",{staticClass:"text-center mt-3"},[e("router-link",{staticClass:"btn btn-secondary mr-3",attrs:{to:"/Shopping/Shopping_List"}},[t._v("繼續選購")]),t._v(" "),e("button",{staticClass:"btn btn-primary text-light",attrs:{type:"submit"}},[t._v("送出訂單")])],1)])])])])])},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("a",{attrs:{"data-toggle":"collapse",href:"#collapseOne"}},[this._v("\n                顯示購物車細節\n                "),a("i",{staticClass:"fa fa-angle-down",attrs:{"aria-hidden":"true"}})])},function(){var t=this.$createElement,a=this._self._c||t;return a("thead",[a("th"),this._v(" "),a("th",[this._v("品名")]),this._v(" "),a("th",[this._v("數量")]),this._v(" "),a("th",[this._v("單價")])])}]};var xt=e("VU/8")(Ct,yt,!1,function(t){e("dn3f")},"data-v-113cbd78",null).exports;s.a.use(f.a);var wt=new f.a({routes:[{path:"*",redirect:"/admin"},{path:"/",name:"",component:ct,children:[{path:"",name:"MainPage",component:ct}]},{path:"/shopping",name:"",component:_t,children:[{path:"",name:"ShoppingPage",component:bt},{path:"Shopping_list",name:"ShoppingList",component:bt},{path:"Order",name:"Order",component:xt}]},{path:"/admin",name:"",component:T,children:[{path:"",name:"Dashboard",component:F,meta:{requiresAuth:!0}},{path:"login",name:"Login",component:y},{path:"products",name:"Products",component:F,meta:{requiresAuth:!0}},{path:"coupons_list",name:"CouponsList",component:j,meta:{requiresAuth:!0}},{path:"order_list",name:"OrderList",component:Z,meta:{requiresAuth:!0}},{path:"/customer_order",name:"CustomerOrder",component:X,meta:{requiresAuth:!0}}]}]});s.a.prototype.$bus=new s.a;s.a.config.productionTip=!1,s.a.use(n.a,o.a),s.a.use(u.a),s.a.use(h.a);var kt=new h.a({locale:"zhTW"});s.a.use(p.a,{i18n:kt,dictionary:{zhTW:m.a}}),s.a.component("Loading",l.a),s.a.filter("currency",function(t){return"$"+Number(t).toFixed(0).replace(/./g,function(t,a,e){return a&&"."!==t&&(e.length-a)%3==0?(", "+t).replace(/\s/g,""):t})}),o.a.defaults.withCredentials=!0,new s.a({i18n:kt,el:"#app",router:wt,components:{App:g},template:"<App/>"}),wt.beforeEach(function(t,a,e){if(t.meta.requiresAuth){o.a.post("https://vue-course-api.hexschool.io/api/user/check").then(function(t){t.data.success?e():e({path:"/admin/login"})})}else e()})},R8Ho:function(t,a){},SYh3:function(t,a){},T2pz:function(t,a){},WRUv:function(t,a){},aw01:function(t,a){},bwvt:function(t,a){},dRra:function(t,a){},dn3f:function(t,a){},fZLP:function(t,a){},fzmc:function(t,a){},"rj+Z":function(t,a){},tUw4:function(t,a){},uVsq:function(t,a){},v5mg:function(t,a){}},["NHnr"]);
//# sourceMappingURL=app.d8f75807e82b3a985363.js.map